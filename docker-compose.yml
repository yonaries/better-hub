services:
        postgres:
                image: postgres:16-alpine
                container_name: better-hub-postgres
                restart: unless-stopped
                environment:
                        POSTGRES_USER: postgres
                        POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-postgres}
                        POSTGRES_DB: better_hub
                ports:
                        - "127.0.0.1:54320:5432"
                volumes:
                        - postgres_data:/var/lib/postgresql/data

        redis:
                image: redis:7-alpine
                container_name: better-hub-redis
                restart: unless-stopped
                volumes:
                        - redis_data:/data

        redis-rest:
                image: hiett/serverless-redis-http:latest
                container_name: better-hub-redis-rest
                restart: unless-stopped
                ports:
                        - "127.0.0.1:8079:80"
                environment:
                        SRH_MODE: env
                        SRH_TOKEN: ${SRH_TOKEN:-local_token}
                        SRH_CONNECTION_STRING: redis://redis:6379
                depends_on:
                        - redis

volumes:
        postgres_data:
        redis_data:
